(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8067],{5225:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(14294).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},13630:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(14294).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},22452:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(14294).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},26848:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(14294).A)("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]])},28263:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(14294).A)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},54466:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>M});var a=s(95155),l=s(5225),r=s(22452),i=s(92033);let c=(0,s(14294).A)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var d=s(26848),n=s(94979),m=s(28263),o=s(74640),h=s(81288),x=s(13630),u=s(52619),p=s.n(u),f=s(3998),y=s(86948),j=s(6259),g=s(34818),k=s(19708),N=s(15894),w=s(64269),v=s(1554),A=s(41048),b=s(50916);function M(){let{user:e,isUserLoading:t}=(0,v.Jd)(),s=(0,v.jt)(),{toast:u}=(0,N.dj)(),M=(0,v.$e)(()=>e?(0,k.rJ)(s,"users/".concat(e.uid,"/messageTemplates")):null,[s,e]),{data:C,isLoading:z}=(0,A.G)(M),T=async t=>{if(!s||!e)return;let a=(0,k.wP)(s),l=(0,k.P)((0,k.rJ)(s,"users/".concat(e.uid,"/messageTemplates")),(0,k._M)("isDefault","==",!0));(await (0,k.GG)(l)).forEach(t=>{let l=(0,k.H9)(s,"users/".concat(e.uid,"/messageTemplates"),t.id);a.update(l,{isDefault:!1})});let r=(0,k.H9)(s,"users/".concat(e.uid,"/messageTemplates"),t.id);a.update(r,{isDefault:!0});try{await a.commit(),u({title:"Template Padr\xe3o Atualizado",description:'"'.concat(t.title,'" \xe9 agora o template padr\xe3o.')})}catch(e){console.error("Error setting default template: ",e),u({variant:"destructive",title:"Erro",description:"N\xe3o foi poss\xedvel definir o template padr\xe3o."})}};return z||t?(0,a.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,a.jsx)(i.A,{className:"h-8 w-8 animate-spin text-primary"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.z,{title:"Templates de Mensagens",children:(0,a.jsx)(f.$,{asChild:!0,children:(0,a.jsxs)(p(),{href:"/templates/new",children:[(0,a.jsx)(r.A,{className:"mr-2 h-4 w-4"}),"Criar Template"]})})}),C&&C.length>0?(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:C.map(t=>(0,a.jsxs)(y.Zp,{className:"flex flex-col",children:[(0,a.jsxs)(y.aR,{className:"flex flex-row items-start justify-between",children:[(0,a.jsx)(y.ZB,{className:"pr-4",children:t.title}),(0,a.jsxs)(f.$,{variant:"ghost",size:"icon",className:"shrink-0 text-muted-foreground hover:text-amber-500",onClick:()=>T(t),children:[(0,a.jsx)(c,{className:(0,w.cn)("h-5 w-5",t.isDefault&&"fill-amber-400 text-amber-500")}),(0,a.jsx)("span",{className:"sr-only",children:"Marcar como padr\xe3o"})]})]}),(0,a.jsx)(y.Wu,{className:"flex-grow",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-3",children:t.content})}),(0,a.jsxs)(y.wL,{className:"flex flex-col items-start gap-2 bg-muted/50 p-4 border-t",children:[(0,a.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(d.A,{className:"h-3 w-3"})," Usado em: ",(0,a.jsx)("span",{className:"font-medium text-foreground",children:"Fluxo de Lembrete"})]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Vari\xe1veis: ",(0,a.jsx)("span",{className:"font-medium text-foreground",children:"2"})]}),(0,a.jsxs)("div",{className:"w-full flex justify-between items-center mt-2",children:[(0,a.jsxs)(f.$,{variant:"outline",size:"sm",onClick:()=>{u({title:"Mensagem de teste enviada!",description:'Um teste do template "'.concat(t.title,'" foi enviado para o seu n\xfamero.')})},children:[(0,a.jsx)(n.A,{className:"mr-2 h-4 w-4"}),"Teste"]}),(0,a.jsxs)(j.rI,{children:[(0,a.jsx)(j.ty,{asChild:!0,children:(0,a.jsx)(f.$,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,a.jsx)(m.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(j.SQ,{align:"end",children:[(0,a.jsx)(j._2,{asChild:!0,children:(0,a.jsxs)(p(),{href:"/templates/edit/".concat(t.id),className:"cursor-pointer",children:[(0,a.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Editar"]})}),(0,a.jsxs)(j._2,{onClick:()=>(t=>{if(!e||!M)return;let s={...t,title:"".concat(t.title," (C\xf3pia)"),isDefault:!1};delete s.id,(0,b.BH)(M,s),u({title:"Template duplicado!",description:'O template "'.concat(t.title,'" foi copiado com sucesso.')})})(t),children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Duplicar"]}),(0,a.jsxs)(j._2,{onClick:()=>(t=>{if(!e)return;let a=(0,k.H9)(s,"users/".concat(e.uid,"/messageTemplates/").concat(t));(0,b.zb)(a),u({title:"Template exclu\xeddo",description:"O modelo de mensagem foi removido."})})(t.id),className:"text-destructive",children:[(0,a.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Excluir"]})]})]})]})]})]},t.id))}):(0,a.jsx)("div",{className:"flex flex-1 items-center justify-center rounded-lg border border-dashed shadow-sm mt-8",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 text-center",children:[(0,a.jsx)(l.A,{className:"h-12 w-12 text-muted-foreground"}),(0,a.jsx)("h3",{className:"text-2xl font-bold tracking-tight",children:"Nenhum template encontrado"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Comece criando seu primeiro modelo de mensagem."}),(0,a.jsx)(f.$,{className:"mt-4",asChild:!0,children:(0,a.jsxs)(p(),{href:"/templates/new",children:[(0,a.jsx)(r.A,{className:"mr-2 h-4 w-4"}),"Criar Template"]})})]})})]})}},57149:(e,t,s)=>{Promise.resolve().then(s.bind(s,54466))},59253:(e,t,s)=>{"use strict";s.d(t,{eJ:()=>a.ab,xI:()=>a.p,hg:()=>a.z,x9:()=>a.ac,r7:()=>a.al});var a=s(5485);s(91398),s(57176),s(5969),s(22396)},74640:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(14294).A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},81288:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(14294).A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},94979:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(14294).A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])}},e=>{e.O(0,[2992,7138,7112,9251,1659,955,7353,531,9118,5308,9082,886,8441,1255,7358],()=>e(e.s=57149)),_N_E=e.O()}]);