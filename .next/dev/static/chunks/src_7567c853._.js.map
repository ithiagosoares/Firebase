{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/user/VitalLink-VF/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,2KAAgB,MAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,6LAAC;QACC,MAAM;QACN,WAAW,IAAA,4HAAE,EACX,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///home/user/VitalLink-VF/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,IAAA,0KAAG,EACvB;AAGF,MAAM,sBAAQ,2KAAgB,MAI5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,4KAAmB;QAClB,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,iBAAiB;QAC9B,GAAG,KAAK;;;;;;;AAGb,MAAM,WAAW,GAAG,4KAAmB,CAAC,WAAW"}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///home/user/VitalLink-VF/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport {cn} from '@/lib/utils';\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<'textarea'>>(\n  ({className, ...props}, ref) => {\n    return (\n      <textarea\n        className={cn(\n          'flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nTextarea.displayName = 'Textarea';\n\nexport {Textarea};\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,2KAAgB,MAC/B,CAAC,EAAC,SAAS,EAAE,GAAG,OAAM,EAAE;IACtB,qBACE,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///home/user/VitalLink-VF/src/hooks/use-upload-file.ts"],"sourcesContent":["\nimport { useState } from 'react';\nimport { ref, uploadBytesResumable, getDownloadURL } from 'firebase/storage';\nimport { useFirebase } from '@/firebase/provider';\n\nexport function useUploadFile() {\n  // CORREÇÃO: Pega a instância do storage diretamente do provider.\n  const { storage } = useFirebase(); \n  const [isUploading, setIsUploading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const upload = async (file: File) => {\n    if (!storage) {\n      setError(\"Firebase Storage não foi inicializado.\");\n      return null;\n    }\n\n    setIsUploading(true);\n    setError(null);\n\n    try {\n      const storageRef = ref(storage, `attachments/${Date.now()}_${file.name}`);\n      const uploadTask = uploadBytesResumable(storageRef, file);\n\n      return new Promise<{ name: string; url: string } | null>((resolve, reject) => {\n        uploadTask.on(\n          'state_changed',\n          (snapshot) => {\n            // Opcional: pode-se adicionar lógica de progresso aqui\n          },\n          (error) => {\n            console.error(\"Erro no upload:\", error);\n            setError(\"Falha ao enviar o arquivo.\");\n            setIsUploading(false);\n            reject(null); // Rejeita a promise em caso de erro\n          },\n          async () => {\n            try {\n                const downloadURL = await getDownloadURL(uploadTask.snapshot.ref);\n                setIsUploading(false);\n                resolve({ name: file.name, url: downloadURL });\n            } catch (e) {\n                console.error(e);\n                setError(\"Falha ao obter a URL de download.\");\n                setIsUploading(false);\n                reject(null); // Rejeita a promise em caso de erro\n            }\n          }\n        );\n      });\n    } catch (e) {\n      console.error(e);\n      setError(\"Ocorreu um erro inesperado durante o upload.\");\n      setIsUploading(false);\n      return null;\n    }\n  };\n\n  return { upload, isUploading, error };\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AAAA;AACA;;;;;AAEO,SAAS;;IACd,iEAAiE;IACjE,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,8IAAW;IAC/B,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAgB;IAElD,MAAM,SAAS,OAAO;QACpB,IAAI,CAAC,SAAS;YACZ,SAAS;YACT,OAAO;QACT;QAEA,eAAe;QACf,SAAS;QAET,IAAI;YACF,MAAM,aAAa,IAAA,2KAAG,EAAC,SAAS,CAAC,YAAY,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,IAAI,EAAE;YACxE,MAAM,aAAa,IAAA,4LAAoB,EAAC,YAAY;YAEpD,OAAO,IAAI,QAA8C,CAAC,SAAS;gBACjE,WAAW,EAAE,CACX,iBACA,CAAC;gBACC,uDAAuD;gBACzD,GACA,CAAC;oBACC,QAAQ,KAAK,CAAC,mBAAmB;oBACjC,SAAS;oBACT,eAAe;oBACf,OAAO,OAAO,oCAAoC;gBACpD,GACA;oBACE,IAAI;wBACA,MAAM,cAAc,MAAM,IAAA,sLAAc,EAAC,WAAW,QAAQ,CAAC,GAAG;wBAChE,eAAe;wBACf,QAAQ;4BAAE,MAAM,KAAK,IAAI;4BAAE,KAAK;wBAAY;oBAChD,EAAE,OAAO,GAAG;wBACR,QAAQ,KAAK,CAAC;wBACd,SAAS;wBACT,eAAe;wBACf,OAAO,OAAO,oCAAoC;oBACtD;gBACF;YAEJ;QACF,EAAE,OAAO,GAAG;YACV,QAAQ,KAAK,CAAC;YACd,SAAS;YACT,eAAe;YACf,OAAO;QACT;IACF;IAEA,OAAO;QAAE;QAAQ;QAAa;IAAM;AACtC;GAtDgB;;QAEM,8IAAW"}},
    {"offset": {"line": 188, "column": 0}, "map": {"version":3,"sources":["file:///home/user/VitalLink-VF/src/components/uploaded-file.tsx"],"sourcesContent":["\nimport { Paperclip, X, Download } from 'lucide-react';\nimport { Button } from './ui/button';\n\ninterface UploadedFileProps {\n  fileName?: string;\n  fileSize?: number;\n  downloadUrl?: string;\n  onRemove: () => void;\n}\n\nexport function UploadedFile({ fileName, fileSize, downloadUrl, onRemove }: UploadedFileProps) {\n  const formatBytes = (bytes?: number) => {\n    if (bytes === undefined) return '';\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  }\n\n  return (\n    <div className=\"flex items-center justify-between p-2.5 rounded-md border border-muted bg-muted/50\">\n        <div className=\"flex items-center gap-3 truncate\">\n            <Paperclip className=\"h-5 w-5 flex-shrink-0 text-muted-foreground\" />\n            <div className=\"truncate\">\n                <p className=\"text-sm font-medium truncate\">{fileName || 'Arquivo anexado'}</p>\n                <p className=\"text-xs text-muted-foreground\">{formatBytes(fileSize)}</p>\n            </div>\n        </div>\n        <div className=\"flex items-center gap-1\">\n            {downloadUrl && (\n                <Button asChild variant=\"ghost\" size=\"icon\">\n                    <a href={downloadUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n                        <Download className=\"h-4 w-4\" />\n                    </a>\n                </Button>\n            )}\n            <Button variant=\"ghost\" size=\"icon\" onClick={onRemove}>\n                <X className=\"h-4 w-4\" />\n            </Button>\n        </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AAAA;AAAA;AACA;;;;AASO,SAAS,aAAa,EAAE,QAAQ,EAAE,QAAQ,EAAE,WAAW,EAAE,QAAQ,EAAqB;IAC3F,MAAM,cAAc,CAAC;QACnB,IAAI,UAAU,WAAW,OAAO;QAChC,IAAI,UAAU,GAAG,OAAO;QACxB,MAAM,IAAI;QACV,MAAM,QAAQ;YAAC;YAAS;YAAM;YAAM;YAAM;SAAK;QAC/C,MAAM,IAAI,KAAK,KAAK,CAAC,KAAK,GAAG,CAAC,SAAS,KAAK,GAAG,CAAC;QAChD,OAAO,WAAW,CAAC,QAAQ,KAAK,GAAG,CAAC,GAAG,EAAE,EAAE,OAAO,CAAC,MAAM,MAAM,KAAK,CAAC,EAAE;IACzE;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC,4NAAS;wBAAC,WAAU;;;;;;kCACrB,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAE,WAAU;0CAAgC,YAAY;;;;;;0CACzD,6LAAC;gCAAE,WAAU;0CAAiC,YAAY;;;;;;;;;;;;;;;;;;0BAGlE,6LAAC;gBAAI,WAAU;;oBACV,6BACG,6LAAC,+IAAM;wBAAC,OAAO;wBAAC,SAAQ;wBAAQ,MAAK;kCACjC,cAAA,6LAAC;4BAAE,MAAM;4BAAa,QAAO;4BAAS,KAAI;sCACtC,cAAA,6LAAC,yNAAQ;gCAAC,WAAU;;;;;;;;;;;;;;;;kCAIhC,6LAAC,+IAAM;wBAAC,SAAQ;wBAAQ,MAAK;wBAAO,SAAS;kCACzC,cAAA,6LAAC,oMAAC;4BAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;AAK7B;KAjCgB"}},
    {"offset": {"line": 326, "column": 0}, "map": {"version":3,"sources":["file:///home/user/VitalLink-VF/src/components/template-form.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useCallback } from \"react\"\nimport { FileUp } from \"lucide-react\"\nimport { useDropzone } from 'react-dropzone'\n\nimport { type Template, WithId } from \"@/lib/types\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { useUploadFile } from \"@/hooks/use-upload-file\"\nimport { UploadedFile } from \"@/components/uploaded-file\"\n\nexport type TemplateFormData = {\n  title: string;\n  body: string; \n  variables?: string[];\n  attachment?: {\n    name: string;\n    url: string;\n  } | null;\n}\n\nexport type TemplateFormProps = {\n  template?: WithId<Template> | null;\n  onSave: (data: TemplateFormData) => Promise<void>;\n  onCancel: () => void;\n};\n\nexport function TemplateForm({ template, onSave, onCancel }: TemplateFormProps) {\n  const [title, setTitle] = useState(\"\");\n  const [body, setBody] = useState(\"\");\n  const [variables, setVariables] = useState<string[]>([]);\n  const [attachment, setAttachment] = useState<File | null>(null);\n  const [existingAttachment, setExistingAttachment] = useState(template?.attachment || null)\n  const [previewName, setPreviewName] = useState(\"Maria\"); // State for live preview\n\n  const { upload, isUploading, error: uploadError } = useUploadFile();\n\n  const onDrop = useCallback((acceptedFiles: File[]) => {\n    if (acceptedFiles.length > 0) {\n        setAttachment(acceptedFiles[0]);\n        setExistingAttachment(null)\n    }\n  }, []);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ \n    onDrop, \n    multiple: false, \n    accept: {\n      'image/*': ['.png', '.gif', '.jpeg', '.jpg'],\n      'application/pdf': ['.pdf'],\n    }\n  });\n\n  useEffect(() => {\n    if (template) {\n      setTitle(template.title);\n      setBody(template.body || \"\"); // CORREÇÃO: Garante que body nunca seja undefined\n      setVariables(template.variables || []);\n      setExistingAttachment(template.attachment || null);\n    }\n  }, [template]);\n\n  const handleSave = async () => {\n    let attachmentData = existingAttachment;\n\n    if (attachment) {\n        const uploadedFile = await upload(attachment);\n        if (uploadedFile) {\n            attachmentData = uploadedFile;\n        }\n    }\n\n    const data: TemplateFormData = { \n        title, \n        body, \n        variables: variables || [], \n        attachment: attachmentData \n    };\n    await onSave(data);\n  };\n\n  const removeAttachment = () => {\n    setAttachment(null)\n    setExistingAttachment(null)\n  }\n\n  return (\n    <div className=\"space-y-8\"> \n        <div className=\"grid gap-2\">\n            <Label htmlFor=\"title\">Título do Template</Label>\n            <Input id=\"title\" value={title} onChange={(e) => setTitle(e.target.value)} />\n        </div>\n\n        <div className=\"grid gap-2\">\n            <Label htmlFor=\"body\">Conteúdo da Mensagem</Label>\n            <Textarea id=\"body\" value={body} onChange={(e) => setBody(e.target.value)} rows={5} />\n            <p className=\"text-sm text-muted-foreground\">\n                {'Use chaves para variáveis, como {{cliente}}.'}\n            </p>\n        </div>\n\n        {/* Live Preview Section */}\n        <div className=\"grid gap-4 rounded-lg border bg-muted/40 p-4\">\n            <div className=\"flex items-center gap-2\">\n                <Label htmlFor=\"preview-name\" className=\"text-sm font-semibold whitespace-nowrap\">\n                    Exemplo com o nome:\n                </Label>\n                <Input \n                    id=\"preview-name\" \n                    value={previewName} \n                    onChange={(e) => setPreviewName(e.target.value)}\n                    className=\"h-8 w-auto flex-1\"\n                    placeholder=\"Ex: João, Maria...\"\n                />\n            </div>\n            <p className=\"text-sm font-semibold\">Pré-visualização:</p>\n            <div className=\"rounded-md border bg-background p-3 text-sm min-h-[60px]\">\n                {/* CORREÇÃO: Garante que a substituição não falhe se body for undefined */}\n                {(body || '').replace(/\\{\\{cliente\\}\\}/g, previewName || '...')}\n            </div>\n        </div>\n\n        <div \n            {...getRootProps()} \n            className={`border-2 border-dashed rounded-md p-6 text-center cursor-pointer \n                        ${isDragActive ? 'border-primary bg-primary/10' : 'border-border'}`}>\n            <input {...getInputProps()} />\n            <FileUp className=\"mx-auto h-8 w-8 text-muted-foreground\" />\n            {isDragActive ?\n                <p className=\"mt-2 text-sm text-primary\">Solte o arquivo aqui...</p> : \n                <p className=\"mt-2 text-sm text-muted-foreground\">Arraste e solte um anexo, ou clique para selecionar</p>\n            }\n        </div>\n\n        {(attachment || existingAttachment) && (\n            <div>\n                <Label>Anexo</Label>\n                <UploadedFile \n                    fileName={attachment?.name || existingAttachment?.name}\n                    fileSize={attachment?.size}\n                    downloadUrl={existingAttachment?.url}\n                    onRemove={removeAttachment}\n                />\n            </div>\n        )}\n        \n        {uploadError && <p className=\"text-sm text-destructive\">{uploadError}</p>}\n\n        <div className=\"flex justify-end gap-2\">\n            <Button variant=\"outline\" onClick={onCancel}>Cancelar</Button>\n            <Button onClick={handleSave} disabled={isUploading}>\n                {isUploading ? 'Salvando...' : 'Salvar Template'}\n            </Button>\n        </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 657, "column": 0}, "map": {"version":3,"sources":["file:///home/user/VitalLink-VF/src/app/%28app%29/templates/new/page.tsx"],"sourcesContent":["'use client'\n\nimport { useRouter } from 'next/navigation'\nimport { collection, addDoc } from 'firebase/firestore'\nimport { TemplateForm, TemplateFormData } from '@/components/template-form'\nimport { useFirestore, useUser } from '@/firebase/provider' // Importando o useUser\nimport { useToast } from '@/hooks/use-toast'\n\nexport default function NewTemplatePage() {\n  const router = useRouter()\n  const { toast } = useToast()\n  const firestore = useFirestore()\n  const { user } = useUser() // Obtendo o usuário autenticado\n\n  const handleSave = async (data: TemplateFormData) => {\n    // Garante que temos o usuário e o firestore antes de prosseguir\n    if (!firestore || !user) return;\n\n    try {\n      // Caminho correto da coleção, dentro do documento do usuário\n      const templatesCollection = collection(firestore, `users/${user.uid}/messageTemplates`);\n      await addDoc(templatesCollection, data);\n\n      toast({ title: \"Template criado!\", description: \"Seu novo template foi salvo com sucesso.\" });\n      router.push('/templates');\n    } catch (error) {\n        console.error(\"Erro ao criar template: \", error)\n        toast({ title: \"Erro\", description: \"Ocorreu um erro ao salvar o template.\", variant: \"destructive\" });\n    }\n  };\n\n  const handleCancel = () => {\n    router.back();\n  };\n\n  return (\n    <TemplateForm onSave={handleSave} onCancel={handleCancel} />\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AACA,gOAA4D,uBAAuB;AACnF;;;AANA;;;;;;AAQe,SAAS;;IACtB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,2IAAQ;IAC1B,MAAM,YAAY,IAAA,+IAAY;IAC9B,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,0IAAO,IAAG,gCAAgC;;IAE3D,MAAM,aAAa,OAAO;QACxB,gEAAgE;QAChE,IAAI,CAAC,aAAa,CAAC,MAAM;QAEzB,IAAI;YACF,6DAA6D;YAC7D,MAAM,sBAAsB,IAAA,oLAAU,EAAC,WAAW,CAAC,MAAM,EAAE,KAAK,GAAG,CAAC,iBAAiB,CAAC;YACtF,MAAM,IAAA,gLAAM,EAAC,qBAAqB;YAElC,MAAM;gBAAE,OAAO;gBAAoB,aAAa;YAA2C;YAC3F,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,4BAA4B;YAC1C,MAAM;gBAAE,OAAO;gBAAQ,aAAa;gBAAyC,SAAS;YAAc;QACxG;IACF;IAEA,MAAM,eAAe;QACnB,OAAO,IAAI;IACb;IAEA,qBACE,6LAAC,yJAAY;QAAC,QAAQ;QAAY,UAAU;;;;;;AAEhD;GA9BwB;;QACP,kJAAS;QACN,2IAAQ;QACR,+IAAY;QACb,0IAAO;;;KAJF"}}]
}